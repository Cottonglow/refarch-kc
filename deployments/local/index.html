



<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-4.0.1">
    
    
      
        <title>Run locally with Docker Compose - Container Shipment EDA reference implementation</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/application.982221ab.css">
      
      
    
    
      <script src="../../assets/javascripts/modernizr.1f0bcf2b.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../../assets/fonts/material-icons.css">
    
    
      <link rel="stylesheet" href="../../extra.css">
    
    
      
    
    
  </head>
  
    <body dir="ltr">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448"
    viewBox="0 0 416 448" id="__github">
  <path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19-18.125
        8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19 18.125-8.5
        18.125 8.5 10.75 19 3.125 20.5zM320 304q0 10-3.125 20.5t-10.75
        19-18.125 8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19
        18.125-8.5 18.125 8.5 10.75 19 3.125 20.5zM360
        304q0-30-17.25-51t-46.75-21q-10.25 0-48.75 5.25-17.75 2.75-39.25
        2.75t-39.25-2.75q-38-5.25-48.75-5.25-29.5 0-46.75 21t-17.25 51q0 22 8
        38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0
        37.25-1.75t35-7.375 30.5-15 20.25-25.75 8-38.375zM416 260q0 51.75-15.25
        82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5-41.75
        1.125q-19.5 0-35.5-0.75t-36.875-3.125-38.125-7.5-34.25-12.875-30.25-20.25-21.5-28.75q-15.5-30.75-15.5-82.75
        0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25
        30.875q36.75-8.75 77.25-8.75 37 0 70 8 26.25-20.5
        46.75-30.25t47.25-9.75q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34
        99.5z" />
</svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#run-the-solution-on-your-laptop" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="../.." title="Container Shipment EDA reference implementation" class="md-header-nav__button md-logo">
          
            <i class="md-icon"></i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
              Container Shipment EDA reference implementation
            </span>
            <span class="md-header-nav__topic">
              Run locally with Docker Compose
            </span>
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  

<a href="https://github.com/ibm-cloud-architecture/refarch-kc/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    GitHub
  </div>
</a>
          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="../.." title="Container Shipment EDA reference implementation" class="md-nav__button md-logo">
      
        <i class="md-icon"></i>
      
    </a>
    Container Shipment EDA reference implementation
  </label>
  
    <div class="md-nav__source">
      


  

<a href="https://github.com/ibm-cloud-architecture/refarch-kc/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2">
    
    <label class="md-nav__link" for="nav-2">
      Business problem statement
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        Business problem statement
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../introduction/" title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../analysis/readme/" title="Event storming analysis" class="md-nav__link">
      Event storming analysis
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../design/readme/" title="Design considerations and microservice identifications" class="md-nav__link">
      Design considerations and microservice identifications
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../design/architecture/" title="Architecture" class="md-nav__link">
      Architecture
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      Development practices
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        Development practices
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="https://ibm-cloud-architecture.github.io/refarch-kc-order-ms" title="Order microservice with CQRS and Event Sourcing" class="md-nav__link">
      Order microservice with CQRS and Event Sourcing
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="https://ibm-cloud-architecture.github.io/refarch-kc-container-ms/kstreams/" title="Container microservice with event sourcing and Kafka streams" class="md-nav__link">
      Container microservice with event sourcing and Kafka streams
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="https://ibm-cloud-architecture.github.io/refarch-kc-container-ms/flask" title="Container microservice with Python" class="md-nav__link">
      Container microservice with Python
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="https://ibm-cloud-architecture.github.io/refarch-kc-container-ms/springboot" title="Container microservice with Springboot - Spring Kafka and PostgreSQL" class="md-nav__link">
      Container microservice with Springboot - Spring Kafka and PostgreSQL
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../reposlist/" title="Related repositories" class="md-nav__link">
      Related repositories
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7" type="checkbox" id="nav-7" checked>
    
    <label class="md-nav__link" for="nav-7">
      Deployments
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-7">
        Deployments
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Run locally with Docker Compose
      </label>
    
    <a href="./" title="Run locally with Docker Compose" class="md-nav__link md-nav__link--active">
      Run locally with Docker Compose
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#pre-requisites" title="Pre requisites" class="md-nav__link">
    Pre requisites
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#start-kafka-zookeeper-and-postgresql" title="Start Kafka, Zookeeper and Postgresql" class="md-nav__link">
    Start Kafka, Zookeeper and Postgresql
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#build-the-solution" title="Build the solution" class="md-nav__link">
    Build the solution
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#start-all-the-microservices" title="Start all the microservices" class="md-nav__link">
    Start all the microservices
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#some-tricks" title="Some tricks" class="md-nav__link">
    Some tricks
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../minikube/" title="Run the complete solution in Minikube" class="md-nav__link">
      Run the complete solution in Minikube
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../iks/" title="Run on IBM Cloud Kubernetes Services" class="md-nav__link">
      Run on IBM Cloud Kubernetes Services
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../icp/" title="Run on IBM Cloud Private" class="md-nav__link">
      Run on IBM Cloud Private
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="https://ibm-cloud-architecture.github.io/refarch-kc-container-ms/cicd" title="Example of ci/cd" class="md-nav__link">
      Example of ci/cd
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../security" title="Security" class="md-nav__link">
      Security
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../itg-tests/" title="Integration tests" class="md-nav__link">
      Integration tests
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../demo/readme/" title="Demonstration script" class="md-nav__link">
      Demonstration script
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#pre-requisites" title="Pre requisites" class="md-nav__link">
    Pre requisites
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#start-kafka-zookeeper-and-postgresql" title="Start Kafka, Zookeeper and Postgresql" class="md-nav__link">
    Start Kafka, Zookeeper and Postgresql
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#build-the-solution" title="Build the solution" class="md-nav__link">
    Build the solution
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#start-all-the-microservices" title="Start all the microservices" class="md-nav__link">
    Start all the microservices
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#some-tricks" title="Some tricks" class="md-nav__link">
    Some tricks
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/ibm-cloud-architecture/refarch-kc/edit/master/docs/deployments/local.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                <h1 id="run-the-solution-on-your-laptop">Run the solution on your laptop</h1>
<p>Updated 05/14/2019.</p>
<p>In this document we present how to set up and run the solution on your local laptop (Tested on mac). We propose to use docker-compose for local deployment. The environment we put in place looks as the diagram below:</p>
<p><img alt="" src="../local-deployment.png" /></p>
<p>Every microservices run in container and two separate docker compose files define reusable backend services (kafka, zookeeper, postgresql) and the application specific services. The docker-compose files are under the <code>docker</code> folder of this project.</p>
<h2 id="pre-requisites">Pre requisites</h2>
<ul>
<li>Get <a href="https://docs.docker.com/install/">docker engine and install</a> it (if not done yet.) To verify docker runs fine use the command <code>docker version</code>. We run on v19.03 community edition.</li>
<li>Get <a href="https://docs.docker.com/compose/install/">docker compose</a>. To verify it runs enter <code>docker-compose version</code>. We run version 1.24.</li>
<li>Assign at least 8GB of memory and may be 4 to 6 CPUs to your docker runtime. This is set in the Docker's Preferences menu and under the <code>Advanced</code> tab.</li>
</ul>
<p><img alt="" src="../docker-preferences.png" /></p>
<ul>
<li>Be sure to have the following hostnames: <code>kafka1 postgresql fleetms kcui simulator ordercmd orderquery springcontainerms postgres</code> mapped to <code>localhost</code> in your <code>/etc/hosts</code> file.  </li>
</ul>
<pre><code>  127.0.0.1 localhost kafka1 postgresql fleetms kcui simulator ordercmd orderquery kcsolution springcontainerms postgres
</code></pre>

<ul>
<li>If not already done, get a git client. See the following <a href="https://git-scm.com/book/en/v2/Getting-Started-Installing-Git">installation instructions</a>. </li>
<li>Be sure to have cloned this repository using git command: <code>git clone https://github.com/ibm-cloud-architecture/refarch-kc/</code>. Open a terminal window and go to the <code>refarch-kc</code> folder.</li>
<li>Use the command <code>./script/clone.sh</code> to get all the solution repositories. You should have at least the following repositories:</li>
</ul>
<pre><code>refarch-kc-container-ms
refarch-kc-order-ms
refarch-kc-ui
refarch-kc
refarch-kc-ms
refarch-kc-streams
</code></pre>

<ul>
<li>
<p>We propose you to have two choices to build the solution: installing node, python and maven or use our own docker images for running those tools. You can mix too, if for example you already develop on nodejs or Java you may want to leverage your own settings. If you do not want to impact your python environmenr, you can user our docker image. See the <a href="#build-the-solution">build section</a> below.</p>
</li>
<li>
<p>To be able to build without our docker images, you need npm, node, maven and docker:  </p>
<ul>
<li>Get <a href="https://maven.apache.org/install.html">maven</a> and add it to your PATH.</li>
<li>Get <a href="https://nodejs.org/en/">node and npm</a></li>
</ul>
</li>
<li>
<p>Most of our integration tests are done in python. To avoid impacting your own python environment, we defined a docker file to build an image with the necessary python library. Go to the <code>docker</code> folder and run the following command: <code>docker build -f docker-python-tools -t ibmcase/python .</code>. See also the <a href="#build-the-solution">build section</a> below for more explanations.</p>
</li>
<li>
<p>In the <code>refarch-kc</code> rename <code>./script/setenv.sh.tmpl</code> to <code>./script/setenv.sh</code>, and modify the environment variables according to your settings. This file is used by a lot of scripts in the solution to set the target deployment environment: LOCAL, IBMCLOUD, ICP.</p>
</li>
</ul>
<h2 id="start-kafka-zookeeper-and-postgresql">Start Kafka, Zookeeper and Postgresql</h2>
<ul>
<li>In one Terminal window, under the <code>refarch-kc</code> folder, use our compose file to start the backend components:   </li>
</ul>
<p><code>$ cd docker &amp;&amp;  docker-compose -f backbone-compose.yml up 2&gt;&amp;1 1&gt;backend.logs &amp;</code>.</p>
<p>It will take some time as it download zookeeper and kafka docker images from dockerhub. When started you should see the following trace:</p>
<pre><code>Creating docker_zookeeper1_1 ... done
Creating docker_kafka1_1     ... done
Creating docker_postgresql_1 ... done
Attaching to docker_zookeeper1_1, docker_kafka1_1
....
</code></pre>

<blockquote>
<p>Note: Starting those components will create two folders in the docker folder: <code>kafka1</code> and <code>zookeeper1</code>. Those folders could be deleted to restart from a fresh environment.  </p>
</blockquote>
<ul>
<li>The first time the kafka backbone is started, you need to configure the Kafka topics used in the solution. The local script: <code>scripts/createLocalTopics.sh</code> will create them.</li>
</ul>
<h2 id="build-the-solution">Build the solution</h2>
<p>This project includes some scripts to help build the full solution once all the repositories are cloned. If you have any problem during this integrated build we recommend going into each project to assess the build process in detail. </p>
<p>We are using polyglote implementations so if you do not want to overload your own laptop with the different library, we propose to use docker images to get development environments for nodes, python and java. (Three separate images). This will help you to do not pollute your computer. 
If you want to use those images, run the three commands below: to build the three images (those images are also in docker hub). </p>
<pre><code class="sh">cd docker
# build the image for java:
docker build -f docker-java-tools -t ibmcase/javatools .
# build the image for nodejs, angular, npm
docker build -f docker-node-tools -t ibmcase/nodetools .
# If already done, build the image for python
docker build  -f docker-python-tools -t ibmcase/python .
</code></pre>

<p>To validate the current images run <code>docker images</code></p>
<p><img alt="" src="../images-1.png" /></p>
<blockquote>
<p>You have two approaches to build the solution, one using a unique command, or one going into each project and follow the local build instructions. From an education point of view we encourage you to do the second approach. </p>
</blockquote>
<ol>
<li>You can build all projects in one command by executing: <code>scripts/buildAll LOCAL</code> from this project. This command may use the docker images built previously if they are visible via the command <code>docker images</code>. If not it will build using maven, npm and angular cli. Some tests use kafka, we did not isolate well our unit tests yet. So be sure to have kafka running as described in the previous session: <a href="#start-kafka-and-zookeeper">Start Kafka and Zookeeper</a>.</li>
<li>
<p>Build one project at a time in the following order:</p>
<ul>
<li><a href="https://github.com/ibm-cloud-architecture/refarch-kc-ms/tree/master/fleet-ms#run">Build the fleet simulator microservice</a>. This component is done in java, and exposes API to get fleets and vessels within a fleet and start / stop simulation. Once started, it generates events for the ship movement to simulate vessels crossing the ocean and container metrics to simulate IoT messages sent to kafka. </li>
<li><a href="https://github.com/ibm-cloud-architecture/refarch-kc-ms/tree/master/voyages-ms">Voyage microservice</a> to simulate the vessel voyage schedule from one harbor to another.</li>
<li><a href="https://github.com/ibm-cloud-architecture/refarch-kc-order-ms">Order manager services</a> to support the order management APIs and to publish and subscribe to <code>orders</code> topic.</li>
<li><a href="https://ibm-cloud-architecture.github.io/refarch-kc-container-ms/">Container manager service</a> to manage Reefer container inventory.</li>
</ul>
</li>
</ol>
<p>Use the <code>scripts/imageStatus</code> script to verify your docker images are built:</p>
<pre><code> ibmcase/kc-ui                  latest    c89827424689        15 hours ago        596MB  
 ibmcase/kc-orderqueryms        latest    09406c8795e8        23 hours ago        548MB   
 ibmcase/kc-ordercmdms          latest    5190db45e4bf        23 hours ago        548MB   
 ibmcase/kc-voyagesms           latest    54b8d6a61f4e        23 hours ago       1.16GB   
 ibmcase/kc-fleetms             latest    a5e1d40a8b1f        23 hours ago        616MB   

</code></pre>

<ul>
<li>If you want to delete the docker images after testing the solution, use the command:
<code>docker rmi $(docker -aq | grep ibmcase)</code></li>
</ul>
<h2 id="start-all-the-microservices">Start all the microservices</h2>
<ol>
<li>In a second terminal window, use our second docker compose file to start the web server and the other microservices: </li>
</ol>
<pre><code># First set environment variables
$ pwd
../refarch-kc/docker
$ source ../scripts/setenv.sh LOCAL
# Then use docker compose to start all the services
$ docker-compose -f kc-solution-compose.yml up
</code></pre>

<p>We have also defined a script to start back end and the solution services in one command: <code>./script/runSolutionLocally</code>.</p>
<ol>
<li>Verify the different components work fine. You can use the different test scripts we have defined in each of the microservice projects or use the following URLs:</li>
<li>For the <a href="http://localhost:3010">user interface URL http://localhost:3010</a></li>
<li>The Fleet Simulator <a href="http://localhost:9080/api/explorer/">API URL</a> or one of its operation to get the fleet names: <a href="http://localhost:9080/fleetms/fleets">http://localhost:9080/fleetms/fleets</a>.</li>
<li>Add an order with the python program under <code>refarch-kc/itg-tests/OrdersPython</code> folder, using the script <code>addOrder.sh</code></li>
<li>The voyages <a href="http://localhost:3100/voyage">http://localhost:3100/voyage</a> microservices returns the small list of voyages.</li>
<li>Using the order query microservice <a href="http://localhost:11080/orders/byManuf/GoodManuf">http://localhost:11080/orders/byManuf/GoodManuf</a> you should see the orders of the "GoodManuf" customer.</li>
</ol>
<p>or run the smoke tests with the script: <code>scripts/localSmokeTests</code>.</p>
<p>Read the <a href="../../demo/readme/">demo script</a> to see how all those components are working together to demonstrate the business process end to end.</p>
<h2 id="some-tricks">Some tricks</h2>
<ul>
<li>With docker-compose you can use the command: <code></code> to stop the solution. You should see the following error message: <code>ERROR: error while removing network: network docker_default id e867... has active endpoints</code>. This is normal as the docker network is still running as the backend services are running. </li>
<li>Clean all docker images: <code>docker rmi -f $(docker images | grep ibmcase | awk '{print $3}')</code></li>
<li>Stop one of the service with docker compote, for example the order command service: <code>docker-compose -f kc-solution-compose.yml  stop ordercmd</code> </li>
</ul>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../reposlist/" title="Related repositories" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Related repositories
              </span>
            </div>
          </a>
        
        
          <a href="../minikube/" title="Run the complete solution in Minikube" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Run the complete solution in Minikube
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/application.b806dc00.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:"../.."}})</script>
      
    
  </body>
</html>